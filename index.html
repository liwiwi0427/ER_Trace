<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECG Pro V13</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // Login Check
        if(!localStorage.getItem('ecg_username')) window.location.replace('login.html');
    </script>
</head>
<body>

<aside>
    <div class="brand">‚ö° ECG Pro <span>V13</span></div>
    
    <!-- ‰∏ªÈ°å -->
    <div class="theme-selector">
        <label>Themes</label>
        <select onchange="changeTheme(this.value)">
            <option value="dark">ÈÜ´ÁôÇÈªë (Clinical)</option>
            <option value="light">ÁóÖÊàøÁôΩ (Light)</option>
            <option value="retro">Âæ©Âè§È¢® (Retro)</option>
            <option value="cyber">Ë≥ΩÂçöÈ¢® (Cyber)</option>
        </select>
    </div>

    <div class="nav-scroll">
        <!-- Menu items same as before, onclick="loadCase('nsr')" etc... -->
        <div class="nav-category">Sinus</div>
        <div class="nav-btn active" onclick="loadCase('nsr')"><span>NSR Ê≠£Â∏∏</span><div class="dot norm"></div></div>
        <div class="nav-btn" onclick="loadCase('sb')"><span>Brady Á∑©ËÑà</span><div class="dot norm"></div></div>
        <div class="nav-category">Atrial</div>
        <div class="nav-btn" onclick="loadCase('afib')"><span>AFib ÊàøÈ°´</span><div class="dot warn"></div></div>
        <!-- Add other buttons here -->
        <div class="nav-category">Ventricular</div>
        <div class="nav-btn" onclick="loadCase('vt')"><span>VT ÂøÉÂÆ§È†ªËÑà</span><div class="dot crit"></div></div>
        <div class="nav-btn" onclick="loadCase('vf')"><span>VF ÂøÉÂÆ§È°´Âãï</span><div class="dot crit"></div></div>
        <div class="nav-btn" onclick="loadCase('asystole')"><span>Asystole</span><div class="dot crit"></div></div>
    </div>
    <div class="sidebar-footer">
        <div class="footer-btn" onclick="if(confirm('Logout?')){localStorage.removeItem('ecg_username');location.href='login.html'}">üö™</div>
    </div>
</aside>

<main>
    <div class="top-deck">
        <div class="monitor-frame">
            <div class="monitor-screen">
                <div class="ecg-grid"></div>
                <canvas id="ecgCanvas"></canvas>
                <div class="monitor-overlay">
                    LEAD II <span id="user-staff-badge">Staff: --</span>
                </div>
            </div>
            
            <!-- ‚úÖ NIBP White, SPO2 Blue, etc. -->
            <div class="vitals-panel">
                <div class="vital-row c-hr">
                    <span class="lbl">HR</span><span class="val" id="val-hr">--</span><span class="unit">bpm</span>
                </div>
                <div class="vital-row c-bp">
                    <span class="lbl">NIBP</span>
                    <div class="val-group"><span id="val-sys">--</span>/<span id="val-dia">--</span></div>
                    <button class="nibp-btn" id="btn-nibp" onclick="toggleNIBP()">Ê∏¨Èáè</button>
                </div>
                <div class="vital-row c-spo2">
                    <span class="lbl">SpO2</span><span class="val" id="val-spo2">--</span><span class="unit">%</span>
                </div>
                <div class="vital-row c-rr">
                    <span class="lbl">RR</span><span class="val" id="val-rr">--</span><span class="unit">rpm</span>
                </div>
                <div class="vital-row c-temp">
                    <span class="lbl">TEMP</span><span class="val" id="val-temp">--</span><span class="unit">¬∞C</span>
                </div>
            </div>
        </div>
        
        <div class="control-panel">
            <!-- Defib & Meds HTML (Same as before) -->
        </div>
    </div>

    <div class="edu-container">
        <div class="anatomy-box">
            <!-- ‚úÖ SVG ‰øÆÊ≠£ ID Ëàá Tooltips -->
            <p id="anatomy-text" style="position:absolute;top:5px;left:10px;color:#aaa;font-size:0.8rem;">Hover to Identify</p>
            <svg class="heart-svg" viewBox="0 0 300 350" style="overflow:visible;">
                <path id="heart-muscle" class="path-heart" d="M150 330 C 50 300, 20 180, 20 120 C 20 60, 80 20, 150 90 C 220 20, 280 60, 280 120 C 280 180, 250 300, 150 330 Z" />
                
                <path id="p-internodal" class="path-wire" d="M80 80 Q 115 110 150 140" data-tip="Internodal Pathways" />
                <path id="p-his" class="path-wire" d="M150 140 L 150 175" data-tip="Bundle of His" />
                <path id="p-branches" class="path-wire" d="M150 175 L 100 260 M 150 175 L 200 260" data-tip="Purkinje / Branches" />
                
                <circle id="n-sa" class="node-dot" cx="80" cy="80" r="8" data-tip="SA Node" />
                <circle id="n-av" class="node-dot" cx="150" cy="140" r="7" data-tip="AV Node" />
                
                <rect id="vis-block" class="block-bar" x="135" y="145" width="30" height="8" />
                <g id="vis-psvt" style="display:none"><circle cx="150" cy="140" r="15" class="reentry-ring"/></g>
            </svg>
        </div>
        
        <div class="content-box">
            <!-- Text Info Tabs (Same structure as before) -->
            <div class="tabs">
                <button class="tab-btn active" onclick="setTab('1')">ÁâπÂæµ</button>
                <button class="tab-btn" onclick="setTab('2')">ÁóÖÁêÜ</button>
                <button class="tab-btn" onclick="setTab('3')">Ê≤ªÁôÇ</button>
            </div>
            <div id="t1" class="tab-content active">
                <div id="alert-box"></div>
                <h3 id="txt-title"></h3>
                <ul id="list-criteria" class="styled-list"></ul>
            </div>
            <div id="t2" class="tab-content">
                <p id="txt-patho"></p>
                <ul id="list-causes" class="styled-list"></ul>
            </div>
            <div id="t3" class="tab-content">
                <ul id="list-rx" class="styled-list list-rx"></ul>
                <ul id="list-nurse" class="styled-list list-nurse"></ul>
            </div>
        </div>
    </div>
</main>

<!-- ÈáçË¶ÅÔºöÈ†ÜÂ∫èÔºÅÂÖàË≥áÊñôÂÜçÈÇèËºØ -->
<script src="data.js"></script>
<script src="script.js"></script>
</body>
</html>
